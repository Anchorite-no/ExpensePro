/* 全局作用域，重写 TagTrendsDashboard 的样式 */
.tag-analysis-root {
  font-family: inherit;
}

/* 共现网络容器 */
.network-container {
  width: 100%;
  overflow: hidden;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--bg-card);
  position: relative;
}

/* Fix black outline/focus ring on all chart elements when clicked */
.tag-analysis-root svg,
.tag-analysis-root svg *,
.tag-analysis-root .recharts-wrapper,
.tag-analysis-root .recharts-surface,
.tag-analysis-root .recharts-scatter,
.tag-analysis-root .recharts-bar,
.tag-analysis-root .recharts-area,
.tag-analysis-root .recharts-cartesian-grid,
.tag-analysis-root .recharts-reference-line,
.tag-analysis-root .recharts-reference-area,
.tag-analysis-root .recharts-tooltip-wrapper,
.tag-analysis-root canvas,
.tag-analysis-root button,
.tag-analysis-root select,
.tag-analysis-root input {
  outline: none !important;
  -webkit-tap-highlight-color: transparent;
}

/* Fix margin issues since we removed card-container and rely on inherited charts-grid gap */
.tag-analysis-root > .chart-card {
  margin-bottom: 20px;
}

.tag-analysis-root .charts-grid {
  margin-bottom: 20px;
  grid-template-columns: 8fr 6fr;
}

/* Ensure no double gaps */
.tag-analysis-root > .chart-card:last-child,
.tag-analysis-root .charts-grid:last-child {
  margin-bottom: 0;
}

/* ==========================================
   资金流向 HTML 布局
   ========================================== */
.flow-list {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.flow-row {
  display: flex;
  align-items: center;
  gap: 16px;
}

.flow-cat {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 90px;
  padding: 6px 8px;
  border-radius: 6px;
  border: 2px solid;
  background: var(--bg-input);
}

.flow-cat-name {
  font-size: 13px;
  font-weight: 700;
  line-height: 1.3;
}

.flow-cat-amount {
  font-size: 10px;
  color: var(--text-secondary);
  margin-top: 1px;
}

.flow-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  flex: 1;
  min-width: 0;
}

.flow-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px 6px 8px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: var(--bg-input);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  cursor: default;
  transition: all 0.2s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.flow-tag::before {
  content: '';
  display: inline-block;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background-color: var(--dot-color);
  flex-shrink: 0;
}

.flow-tag:hover {
  border-color: var(--text-secondary);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
}

.flow-tag-amount {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  margin-left: 4px;
}

.chart-bg-wrapper {
  background-color: rgba(248, 250, 252, 0.5);
  border-radius: 12px;
  border: 1px solid rgba(241, 245, 249, 1);
  padding: 8px;
  width: 100%;
}

:root.dark .chart-bg-wrapper,
html.dark .chart-bg-wrapper,
.dashboard.dark .chart-bg-wrapper {
  background-color: rgba(30, 41, 59, 0.5);
  border-color: var(--border);
}

.custom-scrollbar::-webkit-scrollbar {
  height: 6px;
  width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 10px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}

/* Utilities equivalent to Tailwind classes used in the example */
.w-full { width: 100%; }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.justify-start { justify-content: flex-start; }
.justify-around { justify-content: space-around; }
.flex-1 { flex: 1; }
.flex-grow { flex-grow: 1; }
.flex-wrap { flex-wrap: wrap; }
.content-center { align-content: center; }
.gap-1\.5 { gap: 6px; }
.gap-2 { gap: 8px; }
.gap-3 { gap: 12px; }
.gap-4 { gap: 16px; }
.gap-6 { gap: 24px; }
.p-2 { padding: 8px; }
.p-4 { padding: 16px; }
.p-6 { padding: 24px; }
.py-2 { padding-top: 8px; padding-bottom: 8px; }
.py-4 { padding-top: 16px; padding-bottom: 16px; }
.py-6 { padding-top: 24px; padding-bottom: 24px; }
.px-3 { padding-left: 12px; padding-right: 12px; }
.px-4 { padding-left: 16px; padding-right: 16px; }
.mb-2 { margin-bottom: 8px; }
.mb-4 { margin-bottom: 16px; }
.mb-6 { margin-bottom: 24px; }
.mr-2 { margin-right: 8px; }
.mx-auto { margin-left: auto; margin-right: auto; }
.mt-0\.5 { margin-top: 2px; }
.pb-2 { padding-bottom: 8px; }
.min-h-\[200px\] { min-height: 200px; }
.min-h-\[300px\] { min-height: 300px; }
.min-w-max { min-width: max-content; }
.w-4 { width: 16px; }
.h-4 { height: 16px; }
.max-w-\[1400px\] { max-width: 1400px; }
.overflow-x-auto { overflow-x: auto; }
.overflow-hidden { overflow: hidden; }
.rounded-xl { border-radius: 12px; }
.rounded-\[4px\] { border-radius: 4px; }
.font-bold { font-weight: 700; }
.font-normal { font-weight: 400; }
.text-xs { font-size: 12px; line-height: 16px; }
.text-sm { font-size: 14px; line-height: 20px; }
.text-lg { font-size: 18px; line-height: 28px; }
.text-xl { font-size: 20px; line-height: 28px; }
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-left { text-align: left; }
.text-gray-400 { color: var(--text-secondary); opacity: 0.7; }
.text-gray-500 { color: var(--text-secondary); }
.text-blue-500 { color: #3b82f6; }
.text-indigo-500 { color: #6366f1; }
.text-emerald-500 { color: #10b981; }
.text-pink-500 { color: #ec4899; }
.text-orange-500 { color: #f97316; }
.text-red-500 { color: #ef4444; }
.bg-purple-600 { background-color: #8b5cf6; }
.shadow-purple-200\/50 { box-shadow: 0 4px 6px -1px rgba(139, 92, 246, 0.3); }
.border-dashed { border-style: dashed; }
.absolute { position: absolute; }
.relative { position: relative; }
.top-\[8\%\] { top: 8%; }
.bottom-\[8\%\] { bottom: 8%; }
.bottom-\[15\%\] { bottom: 15%; }
.right-\[8\%\] { right: 8%; }
.bottom-3 { bottom: 12px; }
.right-3 { right: 12px; }
.z-10 { z-index: 10; }
.opacity-30 { opacity: 0.3; }
.opacity-40 { opacity: 0.4; }
.pointer-events-none { pointer-events: none; }
.select-none { user-select: none; }
.cursor-pointer { cursor: pointer; }
.drop-shadow-sm { filter: drop-shadow(0 1px 1px rgba(0,0,0,0.05)); }
.transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 200ms; }
.transition-transform { transition-property: transform; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 200ms; }
.transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 200ms; }
.duration-300 { transition-duration: 300ms; }
.hover\:scale-110:hover { transform: scale(1.1); text-shadow: 0 2px 8px var(--shadow); opacity: 1 !important; }
.hover\:stroke-opacity-100:hover { stroke-opacity: 1; }
.hover\:stroke-gray-400:hover { stroke: var(--text-secondary); }

/* Responsive */
@media (min-width: 640px) {
  .sm\:block { display: block; }
  .hidden { display: none; }
  .sm\:flex-row { flex-direction: row; }
  .sm\:w-36 { width: 144px; }
  .sm\:w-5 { width: 20px; }
  .sm\:h-5 { height: 20px; }
}

@media (min-width: 1024px) {
  .lg\:grid-cols-12 { grid-template-columns: repeat(12, minmax(0, 1fr)); }
  .lg\:col-span-7 { grid-column: span 7 / span 7; }
  .lg\:col-span-5 { grid-column: span 5 / span 5; }
  .lg\:justify-center { justify-content: center; }
}

.animate-fade-in {
  animation: fadeIn 0.4s ease-out forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* 共现网络节点呼吸动画 */
@keyframes node-breathe {
  0%, 100% { transform: scale(1); opacity: 0.92; }
  50% { transform: scale(1.08); opacity: 0.82; }
}

/* 共现网络连线/节点过渡动画 */
.net-link {
  transition: stroke-opacity 0.3s ease, stroke-width 0.3s ease;
}
.net-node {
  transition: opacity 0.3s ease;
}
.net-node .net-circle {
  transition: r 0.3s ease;
}
.space-y-6 > * + * { margin-top: 24px; }

/* ==========================================
   Heatmap Styles
   ========================================== */
/* 1. 顶部控件区域向右平移 */
.heatmap-top-controls {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  flex-wrap: nowrap;
  padding-left: 16px; /* 增加左侧留白，使整体略微偏右 */
}

/* 2. 让选择器按钮更紧凑、通过加粗和边框适度显眼 */
.heatmap-top-controls .heatmap-select-wrapper .custom-select-trigger {
  min-height: 32px !important;
  padding: 6px 12px !important;
  border-radius: 6px !important;
  font-size: 13px !important;
  font-weight: 600;
  border-width: 1px !important;
  border-color: var(--border) !important;
  background-color: var(--bg-input) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04) !important;
}

.heatmap-top-controls .heatmap-select-wrapper {
  width: 140px;
  flex-shrink: 0;
}

/* Legend: 少 -> 多 color scale */
.heatmap-legend {
  display: flex;
  align-items: center;
  gap: 4px;
}

.heatmap-legend-label {
  font-size: 10px;
  color: var(--text-secondary);
  flex-shrink: 0;
}

.heatmap-legend-cell {
  width: 14px;
  height: 14px;
  border-radius: 3px;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
}

/* Heatmap container: allow cells to overflow on hover */
/* 3. 下方热力图网格容器同样向右平移，与顶部对齐 */
.heatmap-container {
  overflow: visible !important;
  padding-top: 6px;
  padding-left: 16px; /* 增加左侧留白 */
}

.heatmap-grid {
  display: flex;
  gap: 6px;
  min-width: max-content;
  padding-bottom: 8px;
  overflow: visible;
}

.heatmap-day-labels {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-right: 4px;
  font-size: 10px;
  color: var(--text-secondary);
  justify-content: space-around;
  flex-shrink: 0;
}

.heatmap-week-col {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow: visible;
}

.heatmap-cell {
  width: 18px;
  height: 18px;
  border-radius: 4px;
  cursor: pointer;
  transition: transform 0.15s ease;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
  position: relative;
  z-index: 1;
}

.heatmap-cell:hover {
  transform: scale(1.25);
  z-index: 10;
}

.heatmap-cell-empty {
  cursor: default;
  box-shadow: none;
}

.heatmap-cell-empty:hover {
  transform: none;
}

@media (min-width: 640px) {
  .heatmap-cell {
    width: 20px;
    height: 20px;
  }
}

/* Calendar (month) view */
.heatmap-calendar {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow: visible;
}

.heatmap-calendar-header {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
  text-align: center;
  font-size: 10px;
  color: var(--text-secondary);
  font-weight: 500;
}

.heatmap-calendar-header span {
  width: 18px;
  text-align: center;
  justify-self: center;
}

.heatmap-calendar-row {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
  justify-items: center;
  overflow: visible;
}

@media (min-width: 640px) {
  .heatmap-calendar-header span {
    width: 20px;
  }
}

/* Single week horizontal layout */
.heatmap-single-week {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow: visible;
}

.heatmap-single-week-header {
  display: flex;
  gap: 6px;
  font-size: 10px;
  color: var(--text-secondary);
  font-weight: 500;
}

.heatmap-single-week-header span {
  width: 18px;
  text-align: center;
}

.heatmap-single-week-row {
  display: flex;
  gap: 6px;
  overflow: visible;
}

@media (min-width: 640px) {
  .heatmap-single-week-header span {
    width: 20px;
  }
}

/* Heatmap cell styled tooltip (replaces native title) */
.heatmap-cell[data-tooltip] {
  position: relative;
}

.heatmap-cell[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 12px;
  line-height: 1.4;
  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease;
  z-index: 100;
  background: var(--tooltip-bg);
  color: var(--tooltip-text);
  border: 1px solid var(--border);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(8px);
}

.heatmap-cell[data-tooltip]:hover::after {
  opacity: 1;
}
